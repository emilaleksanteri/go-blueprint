<script lang="ts">
  import Counter from "./lib/Counter.svelte";

  let message = $state("");

  const load = async () => {
    try {
      const data = await fetch("http://127.0.0.1:8080/");
      message = await data.text();
    } catch (error) {
      console.error("Error fetching data:", error);
    }
  };
</script>

<main>
  <div class="min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-md mx-auto space-y-8">
      <div class="text-center">
        <h1 class="text-4xl font-bold text-gray-900 mb-2">
          Welcome to Vite + React
        </h1>
        <p class="text-gray-600">
          Get started by editing <code class="text-sm bg-gray-100 p-1 rounded"
            >src/App.svelte</code
          >
        </p>
      </div>
      <div class="bg-white p-6 rounded-lg shadow-md">
        <div class="text-center space-y-4">
          <Counter />
          <button
            onclick={() => load()}
            class="block w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-md transition-colors"
          >
            Fetch from Server
          </button>
          {#if message}
            <div class="mt-4 p-4 bg-gray-50 rounded-md">
              <p class="text-gray-700">Server Response:</p>
              <p class="text-gray-900 font-medium">{message}</p>
            </div>
          {/if}
        </div>
        <div class="text-center text-gray-500 text-sm">
          Built with Vite, React, and Tailwind CSS
        </div>
      </div>
    </div>
  </div>
</main>
